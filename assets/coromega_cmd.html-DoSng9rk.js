import{_ as n,c as s,o as a,a as t}from"./app-DJ6fbNhj.js";const e={},p=t(`<h1 id="命令收发相关-api" tabindex="-1"><a class="header-anchor" href="#命令收发相关-api"><span>命令收发相关 API</span></a></h1><h2 id="以-wo-身份发送命令" tabindex="-1"><a class="header-anchor" href="#以-wo-身份发送命令"><span>以 wo 身份发送命令</span></a></h2><ul><li>send_wo_cmd(cmd) <ul><li>范围：任意</li><li>说明：以 wo 身份发送 setting command 命令 没有返回值，部分指令使用此方法发送是无效的</li><li>参数： <ul><li>cmd:命令字符串</li></ul></li><li>示例：</li></ul></li></ul><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">  coromega<span class="token punctuation">:</span><span class="token function">send_wo_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;say hello&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="以-websocket-身份发送命令" tabindex="-1"><a class="header-anchor" href="#以-websocket-身份发送命令"><span>以 websocket 身份发送命令</span></a></h2><ul><li><p>send_ws_cmd(cmd,get_result,timeout)</p><ul><li><p>范围：协程内</p></li><li><p>说明：以 websocket 身份发送命令 当 get_result 为 true 时 ,会返回命令执行结果 否则返回 nil</p><blockquote><p>部分指令没有返回值，如果此时将 get_result 设为为 true, 可能导致程序卡死<br> 例如 say</p></blockquote></li><li><p>参数：</p><ul><li>cmd:命令字符串</li><li>get_result:是否获取返回值</li></ul></li><li><p>返回值：返回命令返回结果 json 字符串</p></li><li><p>示例：</p></li></ul></li></ul><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">  coromega<span class="token punctuation">:</span><span class="token function">send_ws_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp @s ~~~&quot;</span><span class="token punctuation">)</span> <span class="token comment">-- get_result 为 false 或者空时没有返回值</span></span>
<span class="line">  <span class="token keyword">local</span> result <span class="token operator">=</span> coromega<span class="token punctuation">:</span><span class="token function">send_ws_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp @s ~~~&quot;</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">)</span></span>
<span class="line">  coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- result 的结果是一个很复杂的结构</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">local</span> result <span class="token operator">=</span> coromega<span class="token punctuation">:</span><span class="token function">send_ws_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp 网易 ~~~&quot;</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">-- 当有 timeout 时，如果因为违禁词或者其他原因导致收不到消息的返回，则 result 为 nil</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token keyword">not</span> result <span class="token keyword">then</span></span>
<span class="line">      coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;服务器未响应指令，可能是因为指令存在违禁词&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">else</span></span>
<span class="line">      coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;结果：&quot;</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="以玩家身份发送命令" tabindex="-1"><a class="header-anchor" href="#以玩家身份发送命令"><span>以玩家身份发送命令</span></a></h2><ul><li><p>send_player_cmd(cmd,get_result,timeout)</p><ul><li><p>范围：协程内</p></li><li><p>说明：以玩家身份发送命令 当 get_result 为 true 时，会返回命令执行结果 否则返回 nil</p><blockquote><p>部分指令没有返回值，如果此时将 get_result 设为为 true, 可能导致程序卡死<br> 例如 say</p></blockquote></li><li><p>参数：</p><ul><li>cmd:命令字符串</li><li>get_result:是否获取返回值</li></ul></li><li><p>示例：</p></li></ul></li></ul><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">  coromega<span class="token punctuation">:</span><span class="token function">send_player_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp @s ~~~&quot;</span><span class="token punctuation">)</span> <span class="token comment">-- get_result 为 false 或者空时没有返回值</span></span>
<span class="line">  <span class="token keyword">local</span> result <span class="token operator">=</span> coromega<span class="token punctuation">:</span><span class="token function">send_player_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp @s ~~~&quot;</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">)</span></span>
<span class="line">  coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- result 的结果是一个很复杂的结构</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">local</span> result <span class="token operator">=</span> coromega<span class="token punctuation">:</span><span class="token function">send_player_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp 网易 ~~~&quot;</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">-- 当有 timeout 时，如果因为违禁词或者其他原因导致收不到消息的返回，则 result 为 nil</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token keyword">not</span> result <span class="token keyword">then</span></span>
<span class="line">      coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;服务器未响应指令，可能是因为指令存在违禁词&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">else</span></span>
<span class="line">      coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;结果：&quot;</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="以魔法指令身份发送命令" tabindex="-1"><a class="header-anchor" href="#以魔法指令身份发送命令"><span>以魔法指令身份发送命令</span></a></h2><ul><li><p>send_ai_cmd(cmd,get_result,timeout)</p><ul><li><p>范围：协程内</p></li><li><p>说明：以魔法指令身份发送命令 当 get_result 为 true 时，会返回命令执行结果 否则返回 nil</p><blockquote><p>部分指令没有返回值，如果此时将 get_result 设为为 true, 可能导致程序卡死<br> 例如 say</p></blockquote></li><li><p>参数：</p><ul><li>cmd:命令字符串</li><li>get_result:是否获取返回值</li></ul></li><li><p>示例：</p></li></ul></li></ul><div class="language-lua line-numbers-mode" data-highlighter="prismjs" data-ext="lua" data-title="lua"><pre><code><span class="line">  coromega<span class="token punctuation">:</span><span class="token function">send_ai_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp @s ~~~&quot;</span><span class="token punctuation">)</span> <span class="token comment">-- get_result 为 false 或者空时没有返回值</span></span>
<span class="line">  <span class="token keyword">local</span> result <span class="token operator">=</span> coromega<span class="token punctuation">:</span><span class="token function">send_player_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp @s ~~~&quot;</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">)</span></span>
<span class="line">  coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- result 的结果是一个很复杂的结构</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">local</span> result <span class="token operator">=</span> coromega<span class="token punctuation">:</span><span class="token function">send_ai_cmd</span><span class="token punctuation">(</span><span class="token string">&quot;tp 网易 ~~~&quot;</span><span class="token punctuation">,</span><span class="token keyword">true</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">-- 当有 timeout 时，如果因为违禁词或者其他原因导致收不到消息的返回，则 result 为 nil</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token keyword">not</span> result <span class="token keyword">then</span></span>
<span class="line">      coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;服务器未响应指令，可能是因为指令存在违禁词&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">else</span></span>
<span class="line">      coromega<span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;结果：&quot;</span><span class="token punctuation">,</span> json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),l=[p];function o(c,i){return a(),s("div",null,l)}const r=n(e,[["render",o],["__file","coromega_cmd.html.vue"]]),d=JSON.parse('{"path":"/lua%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99/%E5%91%BD%E4%BB%A4%E6%94%B6%E5%8F%91api/coromega_cmd.html","title":"命令","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"命令","description":"命令示例"},"headers":[{"level":2,"title":"以 wo 身份发送命令","slug":"以-wo-身份发送命令","link":"#以-wo-身份发送命令","children":[]},{"level":2,"title":"以 websocket 身份发送命令","slug":"以-websocket-身份发送命令","link":"#以-websocket-身份发送命令","children":[]},{"level":2,"title":"以玩家身份发送命令","slug":"以玩家身份发送命令","link":"#以玩家身份发送命令","children":[]},{"level":2,"title":"以魔法指令身份发送命令","slug":"以魔法指令身份发送命令","link":"#以魔法指令身份发送命令","children":[]}],"git":{"updatedTime":1727773696000,"contributors":[{"name":"RainyHallways","email":"78735995+RainyHallways@users.noreply.github.com","commits":1}]},"filePathRelative":"lua插件编写/命令收发api/coromega_cmd.md"}');export{r as comp,d as data};
